<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>IR Commands - Pokewalker Wiki</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="fixup.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="general/index.html"><strong aria-hidden="true">1.</strong> General Info</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="general/hardware.html"><strong aria-hidden="true">1.1.</strong> Pokewalker Hardware</a></li><li class="chapter-item expanded "><a href="definitions.html"><strong aria-hidden="true">1.2.</strong> Definitions</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Behaviour</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="behaviour/walk_start.html"><strong aria-hidden="true">2.1.</strong> Walk Start</a></li><li class="chapter-item expanded "><a href="behaviour/walk_end.html"><strong aria-hidden="true">2.2.</strong> Walk End</a></li><li class="chapter-item expanded "><a href="behaviour/event_log.html"><strong aria-hidden="true">2.3.</strong> Event Logging</a></li><li class="chapter-item expanded "><a href="behaviour/radar_bush_game.html"><strong aria-hidden="true">2.4.</strong> Radar Bush Game</a></li><li class="chapter-item expanded "><a href="behaviour/poke_radar.html"><strong aria-hidden="true">2.5.</strong> PokeRadar</a></li><li class="chapter-item expanded "><a href="behaviour/wild_pokemon_join.html"><strong aria-hidden="true">2.6.</strong> Wild Pokemon Join</a></li><li class="chapter-item expanded "><a href="behaviour/walker_init.html"><strong aria-hidden="true">2.7.</strong> Walker Initialisation</a></li></ol></li><li class="chapter-item expanded "><a href="structs.html"><strong aria-hidden="true">3.</strong> Data Structures</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> Identification Structures</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Pokemon Structures</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.3.</strong> Route Structures</div></li></ol></li><li class="chapter-item expanded "><a href="eeprom_map.html"><strong aria-hidden="true">4.</strong> EEPROM Map</a></li><li class="chapter-item expanded "><a href="ir_commands.html" class="active"><strong aria-hidden="true">5.</strong> IR Commands</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Manipulating the Pokewalker</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Simulating Peer-play</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> Arbitrary Code Execution</div></li><li class="chapter-item expanded "><a href="programming.html"><strong aria-hidden="true">6.3.</strong> Re-flashing the Walker</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Picowalker</li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> The Picowalker</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="picowalker/hardware.html"><strong aria-hidden="true">7.1.</strong> Picowalker Hardware Alternatives</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Pokewalker Wiki</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ir-commands"><a class="header" href="#ir-commands">IR Commands</a></h1>
<p>Taken and modified from <a href="http://dmitry.gr/?r=05.Projects&amp;proj=28.%20pokewalker#_TOC_34cd8beec5c4813f4d151130632174e7">Dmitry.gr's writeup</a></p>
<div class="table-wrapper"><table><thead><tr><th>CMD</th><th>DIR</th><th>NOTES</th></tr></thead><tbody>
<tr><td>00</td><td>g2w</td><td>Compressed EEPROM write. Documented at length above. Writes 128 bytes on a 128-byte boundary. &quot;extra&quot; byte is top 8 bits of address. Bottom 8 bits will always be zero. Reply will be CMD_04</td></tr>
<tr><td>02</td><td>w2w, g2w</td><td>Direct EEPROM write. Documented at length above. Writes 128 bytes on a 128-byte boundary. &quot;extra&quot; byte is top 8 bits of address. Bottom 8 bits will always be zero. Reply will be CMD_04</td></tr>
<tr><td>04</td><td>w2w, w2g</td><td>ACK for an EEPROM write (CMD_00, CMD_02, CMD_0A, CMD_80, CMD_82)</td></tr>
<tr><td>06</td><td>?2w</td><td>Direct internal memory write. &quot;extra&quot; byte is top 8 bits of address. First byte of payload is low byte of address. The rest of the payload will be written to internal memory at that address. Yes, this means RAM, MMIO, etc. Reply will be CMD_06</td></tr>
<tr><td>0A</td><td>?2w</td><td>Direct EEPROM write, random length. &quot;extra&quot; byte is top 8 bits of address. First byte of payload is low byte of address. The rest of the payload will be written to EEPROM at that address. Reply will be CMD_04</td></tr>
<tr><td>0C</td><td>w2w, g2w</td><td>EEPROM read. Payload is a 16-bit start address, big-endian, followed by a one-byte length. Reply will be CMD_0E</td></tr>
<tr><td>0E</td><td>w2w, w2g</td><td>EEPROM read reply. Payload is the data requested by CMD_0C</td></tr>
<tr><td>10</td><td>w2w</td><td>Sent by the master walker in a peer-play scenario at start. Enclosed is 0x68 bytes of data - the &quot;IDENTITY DATA&quot;. The expected reply from the peer is CMD_12</td></tr>
<tr><td>12</td><td>w2w</td><td>Sent by the slave walker in a peer-play scenario in reply to CMD_10. Enclosed is 0x68 bytes of data - the &quot;IDENTITY DATA&quot;. This data is explained later. The &quot;master&quot; will proceed to exchange needed data, and then will send CMD_14</td></tr>
<tr><td>14</td><td>w2w</td><td>Sent by the master walker in a peer-play scenario after all the needed data has been exchanged. Enclosed is 0x34 bytes of data - the &quot;PEER PLAY DATA&quot;, &quot;extra&quot; byte byte will be 1. Slave walker replies with CMD_14 as well, same format, &quot;extra&quot; byte byte will be 2. Master will then send CMD_16</td></tr>
<tr><td>16</td><td>w2w</td><td>Sent by the master walker in a peer-play scenario. No data. Reply is also a CMD_16. Does the entire peer-play UI and awards gift item.</td></tr>
<tr><td>1C</td><td>w2w</td><td>Sent by the either walker during peer play when it's detected that it's &quot;played&quot; with this peer too recently. Shows the &quot;Cannot connect to trainer again&quot; error. No data.</td></tr>
<tr><td>20</td><td>g2w</td><td>Requests walker's &quot;IDENTITY DATA&quot;. No data attached. Walker is expected to reply with CMD_22</td></tr>
<tr><td>22</td><td>w2g</td><td>Data is &quot;IDENTITY DATA&quot;, 0x68 bytes</td></tr>
<tr><td>24</td><td>??</td><td>Ping request. No operation other than reply with CMD_26.</td></tr>
<tr><td>26</td><td>??</td><td>Ping reply. Sent in reply to CMD_24</td></tr>
<tr><td>2A</td><td>g2w, w2g</td><td>Data is &quot;UNIQUE ID DATA&quot;, used to set RTC. Erases the walker. Differs somehow from CMD_2C. Reply is CMD_2A, 0x28 bytes, &quot;UNIQUE ID DATA&quot; which is now all 0xFF. This command is actually used by the game to reset the walker</td></tr>
<tr><td>2C</td><td>?2w</td><td>Data is &quot;UNIQUE ID DATA&quot;, used to set RTC. Erases the walker. Differs somehow from CMD_2A. Reply is CMD_2C, 0x28 bytes, &quot;UNIQUE ID DATA&quot; whic is now all 0xFF</td></tr>
<tr><td>32</td><td>?2w</td><td>Data is &quot;IDENTITY DATA&quot; that master sends to the slave. From it only RTC is used, if a flag is set. Reply from the walker will be CMD_34</td></tr>
<tr><td>34</td><td>w2?</td><td>Reply to CMD_32, no data</td></tr>
<tr><td>36</td><td>?2w</td><td>No data, no reply. Shows &quot;Cannot complete this connection&quot; error</td></tr>
<tr><td>38</td><td>?2w</td><td>Performs the &quot;walk start&quot; action (same as what CMA_5A does), but without the UI. Does not erase &quot;special event&quot; status, unlike CMD_5A which does. See CMD_5A for details.</td></tr>
<tr><td>40</td><td>g2w</td><td>Same as CMD_32. Data is &quot;IDENTITY DATA&quot; that master sends to the slave. From it only RTC is used, if a flag is set. Reply from the walker will be CMD_42</td></tr>
<tr><td>42</td><td>w2g</td><td>Reply to CMD_40, no data</td></tr>
<tr><td>44</td><td>w2g</td><td>No data, no reply. Show &quot;cannot complete this connection&quot;</td></tr>
<tr><td>4E</td><td>g2w</td><td>No data. Reply is CMD_50. Performs &quot;walk end&quot; action, erases pokemon state, shows &quot;walk end&quot; UI</td></tr>
<tr><td>50</td><td>w2g</td><td>Reply to CMD_4E, no data</td></tr>
<tr><td>52</td><td>?2w</td><td>Same as CMD_32. Data is &quot;IDENTITY DATA&quot; that master sends to the slave. From it only RTC is used, if a flag is set. Reply from the walker will be CMD_54</td></tr>
<tr><td>54</td><td>w2?</td><td>Reply to CMD_52, no data</td></tr>
<tr><td>56</td><td>?2w</td><td>No data, no reply. Shows &quot;Cannot complete this connection&quot; error</td></tr>
<tr><td>5A</td><td>g2w</td><td>No data. Reply is CMD_5A. Performs &quot;walk start&quot; action, including copying data to proper places, shows the UI</td></tr>
<tr><td>60</td><td>?2w</td><td>Same as CMD_32. Data is &quot;IDENTITY DATA&quot; that master sends to the slave. From it only RTC is used, if a flag is set. Reply from the walker will be CMD_62. Also reload our walker info from eeprom.</td></tr>
<tr><td>62</td><td>w2?</td><td>Reply to CMD_60, no data</td></tr>
<tr><td>64</td><td>?2w</td><td>No data, no reply. Shows &quot;Cannot complete this connection&quot; error</td></tr>
<tr><td>66</td><td>?2w</td><td>No data. Set the message to show at connection end to be &quot;Completed&quot;. Reply is CMD_68</td></tr>
<tr><td>68</td><td>w2?</td><td>No data. Reply to CMD_66</td></tr>
<tr><td>80</td><td>g2w</td><td>Compressed EEPROM write. Documented at length above. Writes 128 bytes on a 128-byte boundary. &quot;extra&quot; byte is top 8 bits of address. Bottom 8 bits will always be 0x80. Reply will be CMD_04</td></tr>
<tr><td>82</td><td>w2w, g2w</td><td>Direct EEPROM write. Documented at length above. Writes 128 bytes on a 128-byte boundary. &quot;extra&quot; byte is top 8 bits of address. Bottom 8 bits will always be 0x80. Reply will be CMD_04</td></tr>
<tr><td>9C</td><td>?2w, w2?</td><td>No data. Show &quot;Could not receive...&quot; error. Reply is CMD_9C</td></tr>
<tr><td>9E</td><td>?2w, w2?</td><td>No data. Show &quot;Could not receive...&quot; error. Reply is CMD_9E. Sent by walker in reply to CMD_A0, CMD_A2, CMD_A4, CMD_A6, CMD_A8, CMD_AA, CMD_AC, CMD_AE</td></tr>
<tr><td>A0 A2 A4 A6 A8 AA AC AE</td><td>?2w, w2?</td><td>Use byte 0x5A of the most recently received &quot;IDENTITY DATA&quot; as event index. Check if we've participated. If so, reply with an empty CMD_9E, if not, reply with the same CMD as we received, 17 bytes. First 16 will be &quot;EVENT BITMAP&quot;, last will be the event index we just checked for.</td></tr>
<tr><td>B8 BA BC BE</td><td>?2w</td><td>No data. Award the user a stamp. In order they are: heart, spade, diamond, club. Replies are CMD_C8, CMD_CA, CMD_CC, CMD_CE respectively</td></tr>
<tr><td>C0</td><td>?2w, w2?</td><td>No data. Award the user a &quot;special map&quot; This seems to do nothing but show an icon in the UI, and show the &quot;Special map received&quot; message. Reply is also an empty CMD_C0</td></tr>
<tr><td>C2</td><td>?2w, w2?</td><td>No data. Award the user an &quot;event pokemon&quot;. Details later. Reply is also an empty CMD_C2</td></tr>
<tr><td>C4</td><td>?2w, w2?</td><td>No data. Award the user an &quot;event item&quot;. Details later. Reply is also an empty CMD_C4</td></tr>
<tr><td>C6</td><td>?2w, w2?</td><td>No data. Move the user to an &quot;event route&quot;. Details later. Reply is also an empty CMD_C6</td></tr>
<tr><td>C8 CA CC CE</td><td>w2?</td><td>Replies to CMD_B8, CMD_BA, CMD_BC, CMD_BE respectively. No data.</td></tr>
<tr><td>D0</td><td>?2w</td><td>No data. Same as CMD_C0, except also grant the user all 4 stamps</td></tr>
<tr><td>D2</td><td>?2w</td><td>No data. Same as CMD_C2, except also grant the user all 4 stamps</td></tr>
<tr><td>D4</td><td>?2w</td><td>No data. Same as CMD_C4, except also grant the user all 4 stamps</td></tr>
<tr><td>D6</td><td>?2w</td><td>No data. Same as CMD_C6, except also grant the user all 4 stamps</td></tr>
<tr><td>D8</td><td>?2w</td><td>No data. Show &quot;Cannot complete this connection&quot; error. No reply.</td></tr>
<tr><td>F0</td><td>?2w, w2?</td><td>Not yet fully understood. Data is 0x71 bytes of &quot;ENROLL DATA&quot; Some sort of enroll action. The only path to code that writes te EEPROM's &quot;UNIQUE ID DATA&quot; and &quot;LCD INIT DATA&quot;. Reply is also a CMD_F0, with 0x28 bytes of data - a copy of the &quot;UNIQUE ID DATA&quot;</td></tr>
<tr><td>F4</td><td>?2w</td><td>Immediate disconnect. No reply.</td></tr>
<tr><td>F8</td><td>w2g, w2w</td><td>Part of connection initiation as explained above. No data. Sent by slave walker to master walker or game after getting CMD_FA</td></tr>
<tr><td>FA</td><td>g2w, w2w</td><td>Part of connection initiation as explained above. No data. Sent by game or master walker to slave walker after seeing an advertising byte 0xFC on IR</td></tr>
<tr><td>FE</td><td>?2w, w2?</td><td>Not yet fully understood. Writes the 8 data bytes to EEPROM at offset 8. Never seen in the wild. Reply is an empty CMD_FE</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="eeprom_map.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="programming.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="eeprom_map.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="programming.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
